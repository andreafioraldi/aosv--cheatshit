

quickpath connects every processor to another. each proc has a dedicated mem interface.
each core compete to access the quickpath interconnect. the accesses are serialized.
qpi implements iso model to routing messages!

lock prefix:
in order to perform a lock on data that do not fit one single cache line it uses 2 but cache coerence is not assumed for two lines (we can not be sure that 2 cache lines are in exclusive state).
In this case it asks to other cores to stop actions on cache controllers.

non unifrom memory architectures : NUMA
multiple buses and group of cores that can access only a part of memory in an uniform way.
concepts of close and distant memory.

NUMA nodes is the proc (set of cores) + local memory to it. A NUMA node to access not local mam has to send a request to a core of another NUMA node via qpi.

linux have 2 opt:
* thread scheduling
* memory allocation

system calls allows the proc to guve hints about memory demands for a better performance on numa (libnuma).
also a command: numactl, without changing code of program.




